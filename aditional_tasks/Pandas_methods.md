Ключи

Мы используем следующее сокращение в шпаргалке:

    df: относится к любому объекту Pandas Dataframe.
    s: относится к любому объекту Series Pandas.

## Импорт данных

    pd.read_csv(имя файла): читает данные из файла CSV.
    pd.read_table(имя файла): используется для чтения данных из текстового файла с разделителями.
    pd.read_excel(имя файла): считывает данные из файла Excel.
    pd.read_sql(query,connection _object) : считывает данные из таблицы/базы данных SQL.
    pd.read_json(json _string): он считывает данные из строки в формате JSON, URL-адреса или файла.
    pd.read_html(url): анализирует URL-адрес html, строку или файл и извлекает таблицы в список фреймов данных.
    pd.read_clipboard(): берет содержимое буфера обмена и передает его функции read_table().
    pd.DataFrame(dict): из словаря ключи для имен столбцов, значения для данных в виде списков.

## Экспорт данных

    df.to_csv(имя файла): записывает в файл CSV.
    df.to_excel(имя файла): записывает в файл Excel.
    df.to_sql(table_name, connection_object): запись в таблицу SQL.
    df.to_json(имя файла): запись в файл в формате JSON.

### Создание тестовых объектов

## Это полезно для тестирования сегментов кода.

    pd.DataFrame(np.random.rand(7,18)): относится к 18 столбцам и 7 строкам случайных чисел с плавающей запятой.
    pd.Series(my_list): создает серию из итерируемого my_list.
    df.index= pd.date_range(‘1940/1/20’, Periods=df.shape[0]): добавляет индекс даты.

## Просмотр/проверка данных

    df.head(n): возвращает первые n строк DataFrame.
    df.tail(n): возвращает последние n строк DataFrame.
    df.shape: возвращается количество строк и столбцов.
    df.info(): возвращаются индекс, тип данных и информацию о памяти.
    s.value_counts(dropna=False): просматривает уникальные значения и количество.
    df.apply(pd.Series.value_counts): относится к уникальным значениям и подсчетам для всех столбцов.

## Выбор

    df[col1]: возвращает столбец с меткой col как Series.
    df[[col1, col2]]: возвращает столбцы как новый DataFrame.
    s.iloc[0]: выбор по положению.
    s.loc[‘index_one’]: выбирает по индексу.
    df.iloc[0,:]: возвращает первую строку.
    df.iloc[0,0]: возвращает первый элемент первого столбца.

## Очистка данных

    df.columns = [‘a’,’b’,’c’]: переименовывает столбцы.
    pd.isnull(): проверяет нулевые значения и возвращает логический массив.
    pd.notnull(): это противоположность pd.isnull().
    df.dropna(): удаляет все строки, содержащие нулевые значения.
    df.dropna(axis= 1): удаляет все столбцы, содержащие нулевые значения.
    df.dropna(axis=1,thresh=n): удаляет все строки, которые имеют менее n ненулевых значений.
    df.fillna(x): заменяет все нулевые значения на x.
    s.fillna(s.mean()): заменяет все нулевые значения средним значением (среднее значение можно заменить практически любой функцией из модуля статистики).
    s.astype(float): преобразует тип данных серии в float.
    s.replace(1, ‘one’): заменяет все значения, равные 1, на ‘один’.
    s.replace([1,3],[ ‘one’, ‘three’]): заменяет все 1 на ‘один’ и 3 на ‘три’.
    df.rename(columns=lambda x: x+1): переименовывает массу столбцов.
    df.rename(columns={‘old_name’: ‘new_ name’}): состоит из выборочного переименования.
    df.set_index(‘column_one’): используется для изменения индекса.
    df.rename(index=lambda x: x+1): переименовывает массу индекса.

## Фильтрация, сортировка и группировка

    df[df[col] > 0,5]: возвращает строки, в которых столбец col больше 0,5.
    df[(df[col] > 0,5) &(df[col] < 0,7)] : возвращает строки, где 0,7 > col > 0,5
    df.sort_values(col1): сортирует значения по col1 в порядке возрастания.
    df.sort_values(col2,ascending=False): сортирует значения по col2 в порядке убывания.
    df.sort_values([col1,col2],ascending=[True,False]): сортирует значения по col1 в порядке возрастания и col2 в порядке убывания.
    df.groupby(col1): возвращает объект groupby для значений из одного столбца.
    df.groupby([col1,col2]): возвращает объект groupby для значений из нескольких столбцов.
    df.groupby(col1)[col2]: возвращает среднее значение значений в col2, сгруппированных по значениям в col1.
    df.pivot_table(index=col1,values=[col2,col3],aggfunc=mean): создает сводную таблицу, которая группируется по col1 и вычисляет среднее значение col2 и col3.
    df.groupby(col1).agg(np.mean): вычисляет среднее значение по всем столбцам для каждой уникальной группы col1.
    df.apply(np.mean): его задача — применить функцию np.mean() к каждому столбцу.
    nf.apply(np.max, axis=1): его задача — применить функцию np.max() к каждой строке.

## Присоединение/Объединение

    df1.append(df2): его задача состоит в том, чтобы добавить строки в df1 в конец df2 (столбцы должны быть идентичными).
    pd.concat([df1, df2], axis=1): добавление столбцов в df1 в конец df2 (строки должны быть идентичными).
    df1.join(df2,on=col1,how=’inner’): соединение в стиле SQL столбцов в df1 со столбцами в df2, где строки для col имеют одинаковые значения, ‘how’ может иметь значение «влево», «вправо», «внешнее», «внутреннее».

### Статистика

## Функции статистики могут быть применены к Series, а именно:

    df.describe(): возвращает сводную статистику для числовых столбцов.
    df.mean() : возвращается среднее значение всех столбцов.
    df.corr(): возвращает корреляцию между столбцами в кадре данных.
    df.count(): вернет количество всех ненулевых значений в каждом столбце фрейма данных.
    df.max(): наибольшее значение из каждого столбца.
    df.min(): наименьшее значение из каждого столбца.
    df.median(): возвращает медиану.
    df.std(): возвращает стандартное отклонение для каждого из столбцов.
Источник: https://pythonpip.ru/pandas/kratkoe-rukovodstvo-po-osnovam-pandas